# Railway 部署检查清单

## ✅ 准备工作
- [x] 项目已推送到 GitHub
- [x] 已注册 Railway 账号并登录
- [x] 已有完整的数据库脚本（schema.sql + data.sql）

## 📝 部署步骤

### 第一步：创建 MySQL 数据库（5分钟）
1. [ ] 在 Railway 创建新项目
2. [ ] 添加 MySQL 数据库服务
3. [ ] 等待数据库启动完成
4. [ ] 记录数据库连接信息（Variables 标签页）

### 第二步：导入数据（5分钟）
1. [ ] 打开 MySQL 服务的 Data 标签页
2. [ ] 执行 `backgrond/src/main/resources/sql/schema.sql`
3. [ ] 执行 `backgrond/src/main/resources/sql/data.sql`
4. [ ] 验证数据导入成功（查询 user 表应有 6 条记录）

### 第三步：部署后端（10分钟）
1. [ ] 在 Railway 添加 GitHub Repo
2. [ ] 选择 `backgrond` 目录
3. [ ] 配置环境变量（引用 MySQL 服务的变量）
4. [ ] 等待构建完成
5. [ ] 生成后端域名
6. [ ] 访问 `https://后端域名/api/doc.html` 验证

### 第四步：部署前端（10分钟）
1. [ ] 修改 `frontend/.env.production`，填入后端域名
2. [ ] 提交并推送到 GitHub
3. [ ] 在 Railway 添加 GitHub Repo
4. [ ] 选择 `frontend` 目录
5. [ ] 等待构建完成
6. [ ] 生成前端域名
7. [ ] 访问前端网站测试

### 第五步：测试功能（5分钟）
1. [ ] 使用 admin/123456 登录
2. [ ] 浏览书籍列表
3. [ ] 查看书籍详情
4. [ ] 测试发布书籍功能

## 🔧 关键配置文件

### 必需文件（已存在）
- ✅ `backgrond/Dockerfile`
- ✅ `backgrond/src/main/resources/application-railway.yml`
- ✅ `frontend/Dockerfile`
- ✅ `frontend/nginx.conf`

### 需要修改的文件
- ⚠️ `frontend/.env.production` - 填入后端域名

## 🚨 常见问题

| 问题 | 解决方案 |
|------|---------|
| 后端启动失败 | 检查数据库环境变量是否正确 |
| 前端白屏 | 检查 .env.production 中的后端地址 |
| 接口 404 | 确认后端域名正确，路径包含 /api |
| CORS 错误 | 已配置 allowedOriginPatterns("*")，应该不会出现 |

## 📊 预计时间
总计：约 35 分钟

## 🎯 完成标志
- 前端网站可以正常访问
- 可以使用测试账号登录
- 可以浏览和搜索书籍
- Swagger 文档可以访问

详细步骤请参考：`Railway部署操作步骤.md`
